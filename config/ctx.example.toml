[db]
path = "./data/ctx.sqlite"

[chunking]
max_tokens = 700
overlap_tokens = 80

# Embedding configuration (Phase 2)
# provider: "disabled" (no embeddings), "openai" (OpenAI API)
# When provider != "disabled", model and dims are required
[embedding]
provider = "disabled"
# model = "text-embedding-3-small"
# dims = 1536
# batch_size = 64
# max_retries = 5
# timeout_secs = 30

[retrieval]
final_limit = 12
hybrid_alpha = 0.6         # weight for vector signal (keyword weight = 1 - alpha)
candidate_k_keyword = 80   # FTS candidates to fetch
candidate_k_vector = 80    # vector candidates to fetch
group_by = "document"
doc_agg = "max"
max_chunks_per_doc = 3

[server]
bind = "127.0.0.1:7331"

[connectors.filesystem]
root = "./"
include_globs = ["**/*.md", "**/*.txt", "**/*.rs"]
exclude_globs = ["**/target/**", "**/.git/**"]
follow_symlinks = false

# Git connector — ingest docs from a Git repository
# [connectors.git]
# url = "https://github.com/acme/platform.git"   # or local path
# branch = "main"
# root = "docs/"                                  # subdirectory within the repo
# include_globs = ["**/*.md", "**/*.rst"]
# exclude_globs = []
# shallow = true                                  # --depth 1 to save space
# cache_dir = "./data/.git-cache/platform"        # optional, defaults to data/.git-cache/<hash>

# S3 connector — ingest docs from an Amazon S3 bucket
# Requires: AWS_ACCESS_KEY_ID, AWS_SECRET_ACCESS_KEY env vars
# [connectors.s3]
# bucket = "acme-docs"
# prefix = "engineering/runbooks/"
# region = "us-east-1"
# include_globs = ["**/*.md", "**/*.json"]
# exclude_globs = []
# endpoint_url = "http://localhost:9000"           # optional, for MinIO/LocalStack
