{% extends "base.html" %}

{% block title %}{{ page.title }} — Context Harness Blog{% endblock %}
{% block description %}{{ page.description | default(value="Context Harness blog") }}{% endblock %}
{% block og_type %}<meta property="og:type" content="article">{% endblock %}
{% block og_title %}{{ page.title }}{% endblock %}
{% block twitter_title %}{{ page.title }}{% endblock %}

{% block structured_data %}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "{{ page.title }}",
  "description": "{{ page.description | default(value='') }}",
  "url": "{{ page.permalink | safe }}",
  "datePublished": "{{ page.date | date(format='%Y-%m-%d') }}",
  {% if page.updated %}"dateModified": "{{ page.updated | date(format='%Y-%m-%d') }}",{% endif %}
  "author": {
    "@type": "Organization",
    "name": "Parallax Labs",
    "url": "{{ config.base_url | safe }}"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Parallax Labs",
    "url": "{{ config.base_url | safe }}"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "{{ page.permalink | safe }}"
  },
  "image": "{{ get_url(path=config.extra.og_image) }}"
  {% if page.taxonomies.tags %},
  "keywords": "{{ page.taxonomies.tags | join(sep=', ') }}"
  {% endif %}
}
</script>
{% endblock %}

{% block head_extra %}
<style>
    html { scroll-behavior: smooth; scroll-padding-top: 80px; }

    .post-header {
        max-width: 780px; margin: 0 auto; padding: 100px 24px 0;
    }
    .post-meta {
        font-size: 13px; color: #55556a; margin-bottom: 12px;
        display: flex; align-items: center; gap: 12px;
    }
    .post-tag {
        padding: 2px 8px; border-radius: 100px; font-size: 11px;
        background: rgba(79, 143, 255, 0.1); color: #4f8fff;
        font-family: 'JetBrains Mono', monospace;
    }
    .post-header h1 {
        font-size: 36px; font-weight: 800; letter-spacing: -0.5px; margin-bottom: 8px;
    }
    .post-header .lead {
        font-size: 17px; color: #8888a0; line-height: 1.8; margin-bottom: 0;
    }

    .post-content {
        max-width: 780px; margin: 0 auto; padding: 40px 24px 120px;
    }
    .post-content h2 {
        font-size: 22px; font-weight: 700; margin-top: 48px; margin-bottom: 12px; color: #e4e4ec;
    }
    .post-content h3 {
        font-size: 17px; font-weight: 700; margin-top: 32px; margin-bottom: 10px; color: #e4e4ec;
    }
    .post-content p { margin-bottom: 16px; color: #8888a0; font-size: 15px; line-height: 1.8; }
    .post-content ul, .post-content ol { margin-bottom: 16px; padding-left: 24px; color: #8888a0; font-size: 15px; }
    .post-content li { margin-bottom: 6px; line-height: 1.7; }
    .post-content strong { color: #e4e4ec; font-weight: 600; }
    .post-content em { color: #6ba3ff; font-style: normal; }
    .post-content a { color: #4f8fff; }
    .post-content a:hover { color: #6ba3ff; text-decoration: underline; }
    .post-content hr { border: none; border-top: 1px solid #1e1e2e; margin: 40px 0; }

    .post-content code {
        font-family: 'JetBrains Mono', 'SF Mono', 'Fira Code', monospace;
        font-size: 0.88em; background: #12121a; padding: 2px 7px; border-radius: 4px;
        color: #6ba3ff;
    }
    .post-content pre {
        background: #12121a; border: 1px solid #1e1e2e;
        border-radius: 8px; padding: 16px 20px;
        overflow-x: auto; margin-bottom: 20px;
        font-size: 13px; line-height: 1.75;
    }
    .post-content pre code { background: none; padding: 0; color: #8888a0; font-size: 13px; }

    .post-content table { width: 100%; border-collapse: collapse; margin-bottom: 20px; font-size: 14px; }
    .post-content th {
        text-align: left; padding: 10px 14px;
        background: #12121a; border: 1px solid #1e1e2e;
        font-weight: 600; color: #e4e4ec; font-size: 13px;
    }
    .post-content td { padding: 10px 14px; border: 1px solid #1e1e2e; color: #8888a0; }

    .post-content blockquote {
        padding: 16px 20px; border-radius: 8px; margin-bottom: 20px; font-size: 14px;
        border-left: 3px solid #4f8fff; background: rgba(79, 143, 255, 0.06);
    }
    .post-content blockquote p { color: #8888a0; margin: 0; }

    .post-footer {
        max-width: 780px; margin: 0 auto; padding: 0 24px 80px;
        border-top: 1px solid #1e1e2e; padding-top: 32px;
    }
    .post-footer a {
        display: inline-flex; align-items: center; gap: 6px;
        color: #4f8fff; font-size: 14px; font-weight: 600;
    }
</style>
{% endblock %}

{% block body %}
{% set brand_slash = "Blog" %}
{% set brand_slash_url = get_url(path='@/blog/_index.md') %}
<nav class="fixed top-0 left-0 right-0 z-50 h-14 bg-bg/90 backdrop-blur-xl border-b border-border flex items-center px-6">
    <div class="w-full max-w-[1400px] mx-auto flex items-center justify-between">
        {% include "partials/site_header.html" with context %}
    </div>
</nav>

<article>
    <div class="post-header">
        <div class="post-meta">
            <span>{{ page.date | date(format="%B %d, %Y") }}</span>
            {% if page.taxonomies.tags %}
                {% for tag in page.taxonomies.tags %}
                <span class="post-tag">{{ tag }}</span>
                {% endfor %}
            {% endif %}
        </div>
        <h1>{{ page.title }}</h1>
        {% if page.description %}
        <p class="lead">{{ page.description }}</p>
        {% endif %}
    </div>

    <div class="post-content">
        {{ page.content | safe }}
    </div>
</article>

<div class="post-footer">
    <a href="{{ get_url(path='@/blog/_index.md') }}">← All posts</a>
</div>
{% endblock %}
